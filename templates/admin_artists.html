{% extends "base.html" %}
{% block content %}
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3 class="mb-0">Admin — Artists</h3>
    <a href="/dashboard" class="btn btn-outline-secondary">Back</a>
  </div>

  <div class="row g-3">
    <div class="col-md-6">
      <div class="card p-3">
        <h6 class="fw-bold">Create Artist</h6>
        <form method="post" action="/admin/artists/create">
          <div class="mb-2"><input class="form-control" type="text" name="name" placeholder="Artist Name" required></div>
          <button class="btn btn-primary">Create</button>
        </form>
      </div>
    </div>
    <div class="col-md-6">
      <div class="card p-3">
        <h6 class="fw-bold">Link Artist to User</h6>
        <form method="post" action="/admin/artists/link">
          <div class="mb-2">
            <label class="form-label">Artist</label>
            <select class="form-select" name="artist_id" required>
              {% for a in artists %}<option value="{{ a.id }}">{{ a.name }}</option>{% endfor %}
            </select>
          </div>
          <div class="mb-2">
            <label class="form-label">User</label>
            <select class="form-select" name="user_id" required>
              {% for u in users %}<option value="{{ u.id }}">{{ u.email }}{% if u.is_admin %} (admin){% endif %}</option>{% endfor %}
            </select>
          </div>
          <button class="btn btn-primary">Link</button>
        </form>
      </div>
    </div>
  </div>

  <div class="mt-4">
    <h6 class="fw-bold mb-2">Artists</h6>
    <ul class="list-group">
      {% for a in artists %}
      <li class="list-group-item d-flex justify-content-between align-items-center">
        <span>{{ a.name }} {% if a.owner %}<span class="text-muted">— {{ a.owner.email }}</span>{% endif %}</span>
        <div class="d-flex gap-2">
          <a class="btn btn-sm btn-outline-secondary" href="/artist/{{ a.slug }}">Open</a>
          <a class="btn btn-sm btn-outline-primary" href="/admin/artists/{{ a.id }}/edit">Edit</a>
        </div>
      </li>
      {% endfor %}
    </ul>
  </div>
{% endblock %}
