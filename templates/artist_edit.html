{% extends "base.html" %}
{% block content %}
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3 class="mb-0">Edit Artist</h3>
    <div class="d-flex gap-2">
      <a href="/artist/{{ artist.slug }}" class="btn btn-outline-secondary">View</a>
      <a href="/dashboard" class="btn btn-outline-secondary">Dashboard</a>
    </div>
  </div>

  <form method="post" action="/artist/{{ artist.id }}/edit">
    <div class="mb-3">
      <label class="form-label">Artist Name</label>
      <input class="form-control" type="text" name="name" value="{{ artist.name }}" required>
      <div class="form-text">※ スラッグ（URL名）は MVP では固定にしています。</div>
    </div>

    <div class="row g-3">
      <div class="col-md-4">
        <label class="form-label">X (Twitter) URL</label>
        <input class="form-control" type="url" name="twitter" value="{{ artist.twitter or '' }}">
      </div>
      <div class="col-md-4">
        <label class="form-label">Instagram URL</label>
        <input class="form-control" type="url" name="instagram" value="{{ artist.instagram or '' }}">
      </div>
      <div class="col-md-4">
        <label class="form-label">Spotify URL</label>
        <input class="form-control" type="url" name="spotify" value="{{ artist.spotify or '' }}">
      </div>
    </div>

    {% if user.is_admin and users %}
    <div class="mt-3">
      <label class="form-label">Owner (招待ユーザー)</label>
      <select class="form-select" name="owner_id">
        <option value="">（変更しない）</option>
        {% for u in users %}
          <option value="{{ u.id }}" {% if artist.owner and artist.owner.id == u.id %}selected{% endif %}>
            {{ u.email }}{% if u.is_admin %} (admin){% endif %}
          </option>
        {% endfor %}
      </select>
      <div class="form-text">※ 管理者のみ変更できます。</div>
    </div>
    {% endif %}

    <div class="mt-3">
      <button class="btn btn-primary" type="submit">Save</button>
      <a href="/artist/{{ artist.slug }}" class="btn btn-link">Cancel</a>
    </div>
  </form>
{% endblock %}