{% extends "base.html" %}
{% block content %}
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h3 class="mb-0">My Posts{% if user.is_admin %} (All){% endif %}</h3>
    <a href="/dashboard/new" class="btn btn-primary">＋ New</a>
  </div>

  <table class="table align-middle">
    <thead>
      <tr><th>ID</th><th>Title</th><th>Artist</th><th>Hearts</th><th>Created</th><th></th></tr>
    </thead>
    <tbody>
      {% for p in posts %}
      <tr>
        <td>{{ p.id }}</td>
        <td><a href="/p/{{ p.id }}">{{ p.title }}</a></td>
        <td><a href="/artist/{{ p.artist.slug }}">{{ p.artist.name }}</a></td>
        <td>♥ {{ p.likes or 0 }}</td>
        <td>{{ p.created_at.strftime("%Y-%m-%d") }}</td>
        <td class="text-end">
          <a class="btn btn-sm btn-outline-primary me-1" href="/dashboard/posts/{{ p.id }}/edit">Edit</a>
          <form method="post" action="/dashboard/posts/{{ p.id }}/delete" class="d-inline" onsubmit="return confirm('Delete this post?');">
            <button class="btn btn-sm btn-outline-danger">Delete</button>
          </form>
        </td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}
